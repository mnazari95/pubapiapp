(this.webpackJsonppubapiapp=this.webpackJsonppubapiapp||[]).push([[0],{13:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(2),r=a(3),i=a(15),s=a.n(i),c=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"formatDate",value:function(e){var t=Date.parse(e);return s()(t,"mediumDate",!0,!1)}}]),e}()},16:function(e,t,a){e.exports=a(28)},21:function(e,t,a){},22:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(14),s=a.n(i),c=(a(21),a(2)),l=a(3),o=a(6),u=a(5),m=a(4),f=a(7),h=(a(22),a(13)),p=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"getApiKey",value:function(){return"ODzH3jmeAJGRZDVB55ZtsKP153HaU3AH"}}]),e}(),d=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},a}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?api-key="+p.getApiKey()).then((function(e){if(!e)throw Error(e.statusText);return e.json()})).then((function(t){e.setState({data:t.results})}))}},{key:"render",value:function(){var e=new h.a;return r.a.createElement("div",{className:"grid-container"},this.state.data.map((function(t,a){return r.a.createElement("div",{key:a,className:"article"},r.a.createElement("a",{href:t.url,className:"page-link",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("div",{className:"article-box"},r.a.createElement("div",{className:"article-title"},t.title,r.a.createElement("div",{className:"article-img"},r.a.createElement("img",{src:t.media?t.media.map((function(e){return e["media-metadata"][2].url})):null,alt:""}))),r.a.createElement("div",{className:"article-snippet"},t.abstract?t.abstract:"N/A"),r.a.createElement("div",{className:"article-date"},e.formatDate(t.updated)))))})))}}]),t}(r.a.Component),v=a(9),b=a(8),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).isEnterPressed=function(e){"Enter"===e.key&&(""!==a.state.query?a.sendQuery():alert("please search for something.."))},a.sendQuery=function(){a.props.retreiveData(a.state.query)},a.userInput=function(e){a.setState({query:e.target.value})},a.state={query:""},a.isEnterPressed=a.isEnterPressed.bind(Object(m.a)(a)),a.userInput=a.userInput.bind(Object(m.a)(a)),a.sendQuery=a.sendQuery.bind(Object(m.a)(a)),a}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex-container"},r.a.createElement("input",{className:"search-bar",type:"text",placeholder:"search here..",onChange:this.userInput,onKeyPress:this.isEnterPressed}),r.a.createElement("button",{className:"search-btn",onClick:this.sendQuery},r.a.createElement(v.a,{icon:b.c})))}}]),t}(r.a.Component),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).sendPage=function(e){a.setState({getPage:e.target.value},(function(){a.props.retreivePage(a.state.getPage)}))},a.state={lastPage:0,getPage:0,pages:[]},a.sendPage=a.sendPage.bind(Object(m.a)(a)),a}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"page-list"},r.a.createElement("button",{className:"page-item",onClick:this.sendPage,value:0},"first"),this.state.pages.map((function(t,a){return r.a.createElement("button",{key:a,className:"page-item",onClick:e.sendPage,value:t-1},t)})),r.a.createElement("button",{className:"page-item",onClick:this.sendPage,value:this.state.lastPage},"last"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{pages:e.btnDetail,lastPage:e.lastPage}}}]),t}(r.a.Component),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).mSectionList=[],a.mFilterList=[],a.checkList=function(e,t){return e.includes(t)},a.updateState=function(){a.setState({filterList:a.mFilterList,sectionList:a.mSectionList},(function(){a.props.retreiveFilteredQuery(a.state)}))},a.checkBoxEvent=function(e){var t=e.target.value;e.target.checked?a.handleState(t):(a.checkList(a.mFilterList,t)&&a.mFilterList.splice(a.mFilterList.indexOf(t),1),a.checkList(a.mSectionList,t)&&a.mSectionList.splice(a.mSectionList.indexOf(t),1)),a.updateState()},a.inputEvent=function(e){var t=e.target.value;"sdate"===e.target.name?a.setState({sDate:t}):a.setState({eDate:t}),a.updateState()},a.handleSort=function(e){var t=e.target.value;a.setState({sort:t}),a.updateState()},a.handleState=function(e){switch(e){case"article":case"biography":case"blog":case"interview":case"news":case"review":case"statistics":a.checkList(a.mFilterList,e)||a.mFilterList.push(e);break;default:a.checkList(a.mSectionList,e)||a.mSectionList.push(e)}},a.myCheckBox=function(e){return r.a.createElement("div",{key:e},r.a.createElement("input",{type:"checkbox",id:e,value:e,onChange:a.checkBoxEvent}),r.a.createElement("label",{htmlFor:e},a.capFirstLetter(e)))},a.capFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},a.state={sDate:"",eDate:"",sectionList:[],filterList:[],sort:""},a.myCheckBox=a.myCheckBox.bind(Object(m.a)(a)),a}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"filter-wrapper"},r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-options"},r.a.createElement("div",{className:"option-element"},r.a.createElement("label",null,"Section")),r.a.createElement("div",{className:"option-element checkbox-list"},["World","Politics","Arts","Books","Business","Education","Food","Health","Style","Movies","National","Real Estate","Science","Technology","Sports","Learning"].map((function(t){return e.myCheckBox(t)})))),r.a.createElement("div",{className:"filter-options"},r.a.createElement("div",{className:"option-element"},r.a.createElement("label",null,"Type of Material")),r.a.createElement("div",{className:"option-element checkbox-list"},["news","article","biography","blog","interview","review","statistics"].map((function(t){return e.myCheckBox(t)}))),r.a.createElement("div",{className:"option-element"},r.a.createElement("label",null,"Sort by")),r.a.createElement("div",{className:"option-element"},r.a.createElement("input",{type:"date",placeholder:"start date",name:"sdate",onChange:this.inputEvent})),r.a.createElement("div",{className:"option-element"},r.a.createElement("input",{type:"date",placeholder:"end date",name:"edate",onChange:this.inputEvent}),r.a.createElement("select",{className:"filter-selector",onChange:this.handleSort},r.a.createElement("option",{value:"relevance"},"relevance"),r.a.createElement("option",{value:"oldest"},"old"),r.a.createElement("option",{value:"newest"},"new"))))))}}]),t}(r.a.Component),j=r.a.lazy((function(){return a.e(3).then(a.bind(null,29))})),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).filterSearch=function(){a.state.isFilterSearch?a.setState({isFilterSearch:!1}):a.setState({isFilterSearch:!0})},a.onFilterSearch=function(e){a.setState({filterObj:{sections:e.sectionList,filter:e.filterList,sDate:e.sDate,eDate:e.eDate,sort:e.sort}})},a.onSearch=function(e){a.setState({userQuery:e},(function(){a.queryData()}))},a.onPageChange=function(e){a.setState({page:e},(function(){a.queryData()}))},a.queryData=function(){""!==a.state.userQuery&&a.processFetch(a.state.userQuery)},a.adjustPagination=function(){for(var e=a.state.numOfArticle,t=[],n=[],r=Math.floor(e/10),i=a.state.offset,s=Math.floor(i/10),c=0;c<r&&c<100;c++)t[c]=c+1;var l=t.length-1;if(s>=4&&s<=94){var o=s-5,u=s+5;n=t.slice(o,u)}else s>94?n=t.slice(90,100):s<4&&(n=t.slice(0,10));a.setState({pagination:n,page:s,lastPage:l})},a.formatDate=function(e){return e.replace(/-/g,"")},a.processFetch=function(e){if(a.state.isFilterSearch){var t="",n="",r="&sort=relevance",i="",s="";if(""!==a.state.filterObj.sDate&&a.state.filterObj.eDate&&(t="&begin_date="+a.formatDate(a.state.filterObj.sDate),n="&end_date="+a.formatDate(a.state.filterObj.eDate)),""!==a.state.filterObj.sort&&(r="&sort="+a.state.filterObj.sort),"undefined"!=typeof a.state.filterObj.sections&&null!=a.state.filterObj.sections&&null!=a.state.filterObj.sections.length&&a.state.filterObj.sections.length>0){for(var c in i="&fq=section_name:(",a.state.filterObj.sections)i+='"'+a.state.filterObj.sections[c]+'"';i+=")"}if("undefined"!=typeof a.state.filterObj.filter&&null!=a.state.filterObj.filter&&null!=a.state.filterObj.filter.length&&a.state.filterObj.filter.length>0){for(var l in s=i.length>0?" AND":"&fq=",s+=" type_of_material:(",a.state.filterObj.filter)s+='"'+a.state.filterObj.filter[l]+'"';s+=")"}fetch("https://api.nytimes.com/svc/search/v2/articlesearch.json?q="+a.state.userQuery+i+s+t+n+r+"&page="+a.state.page+"&api-key="+p.getApiKey()).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(e){a.setState({res:e.response,numOfArticle:e.response.meta.hits,offset:e.response.meta.offset,isReady:!0})}),(function(e){a.setState({err:e,isReady:!0})})).then((function(){return a.adjustPagination()}))}else fetch("https://api.nytimes.com/svc/search/v2/articlesearch.json?q="+e+"&sort=relevance&page="+a.state.page+"&api-key="+p.getApiKey()).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(e){a.setState({res:e.response,numOfArticle:e.response.meta.hits,offset:e.response.meta.offset,isReady:!0})}),(function(e){a.setState({err:e,isReady:!0})})).then((function(){return a.adjustPagination()}))},a.state={isReady:!1,isFilterSearch:!1,page:0,numOfArticle:0,offset:0,lastPage:0,userQuery:"",res:[],pagination:[],filterObj:{sections:[],filter:[],sDate:"",eDate:"",sort:""},err:null},a.queryData=a.queryData.bind(Object(m.a)(a)),a.adjustPagination=a.adjustPagination.bind(Object(m.a)(a)),a}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(g,{retreiveData:this.onSearch}),this.state.isFilterSearch?r.a.createElement(E,{retreiveFilteredQuery:this.onFilterSearch,toggleFilter:this.state.isFilterSearch}):null,r.a.createElement("button",{className:"filter-btn",onClick:this.filterSearch},r.a.createElement(v.a,{icon:this.state.isFilterSearch?b.b:b.a})),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,r.a.createElement("img",{src:"logo.svg",alt:""}))},this.state.isReady?r.a.createElement(j,{res:this.state.res}):r.a.createElement(d,null)),this.state.isReady?r.a.createElement(y,{retreivePage:this.onPageChange,btnDetail:this.state.pagination,lastPage:this.state.lastPage}):null)}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render([r.a.createElement(O,null),r.a.createElement((function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",null,"New York Times article searcher"))}),null)],document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.733a200c.chunk.js.map